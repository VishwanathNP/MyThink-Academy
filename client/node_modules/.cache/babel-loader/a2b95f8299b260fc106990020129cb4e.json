{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Vishw\\\\OneDrive\\\\Documents\\\\Mythinkacademy\\\\client\\\\src\\\\pages\\\\Dashboard\\\\Parent\\\\Overview\\\\addChild.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useRef, useEffect, useCallback } from 'react';\nimport { FiX } from 'react-icons/fi';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { isEmpty, isStrong, isLength, isMatch } from '../../../../Utils/Validation/Validation';\nimport makeToast from '../../../../Utils/Notification/Toaster';\nimport axios from 'axios';\nimport { fetchAllGrades, dispatchGetAllGrades } from '../../../../redux/actions/GradesAction';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst initialState = {\n  firstName: '',\n  lastName: '',\n  username: '',\n  birthday: '',\n  grade: '',\n  password: '',\n  cf_password: '',\n  err: '',\n  success: ''\n};\nexport const AddChild = ({\n  showModal,\n  setShowModal\n}) => {\n  _s();\n\n  const allGrades = useSelector(state => state.allGrades);\n  const {\n    grades\n  } = allGrades;\n  const dispatch = useDispatch();\n  useEffect(() => {\n    fetchAllGrades().then(res => {\n      dispatch(dispatchGetAllGrades(res));\n    });\n  }, [dispatch]);\n  const parentToken = useSelector(state => state.parentToken);\n  const [student, setStudent] = useState(initialState);\n  const {\n    firstName,\n    lastName,\n    username,\n    birthday,\n    grade,\n    password,\n    cf_password,\n    err,\n    success\n  } = student;\n\n  const handleChangeInput = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setStudent({ ...student,\n      [name]: value,\n      err: '',\n      success: ''\n    });\n  };\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (isEmpty(firstName) || isEmpty(lastName) || isEmpty(username) || isEmpty(birthday) || isEmpty(grade) || isEmpty(password) || isEmpty(cf_password)) return setStudent({ ...student,\n      err: 'Please fill in all fields.',\n      success: ''\n    });\n    if (isLength(password)) return setStudent({ ...student,\n      err: 'Password must be at least 6 characters.',\n      success: ''\n    });\n    if (!isStrong(password)) return setStudent({ ...student,\n      err: 'Password must contain one or more alphanumeric characters.',\n      success: ''\n    });\n    if (!isMatch(password, cf_password)) return setStudent({ ...student,\n      err: 'Password did not match.',\n      success: ''\n    });\n\n    try {\n      const res = await axios.post('/parent/addchild', {\n        firstName,\n        lastName,\n        username,\n        birthday,\n        grade,\n        password\n      }, {\n        headers: {\n          Authorization: parentToken\n        }\n      });\n      setStudent({ ...student,\n        err: '',\n        success: res.data.msg\n      });\n      window.location.reload(false);\n    } catch (err) {\n      err.response.data.msg && setStudent({ ...student,\n        err: err.response.data.msg,\n        success: ''\n      });\n    }\n  };\n\n  const modalRef = useRef();\n\n  const closeModal = e => {\n    if (modalRef.current === e.target) {\n      setShowModal(false);\n    }\n  };\n\n  const keyPress = useCallback(e => {\n    if (e.key === 'Escape' && showModal) {\n      setShowModal(false);\n    }\n  }, [setShowModal, showModal]);\n  useEffect(() => {\n    document.addEventListener('keydown', keyPress);\n    return () => document.removeEventListener('keydown', keyPress);\n  }, [keyPress]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: showModal ? /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: modalRef,\n      onClick: closeModal,\n      className: \"w-full h-full fixed inset-0 z-10 flex items-center justify-center p-4 \",\n      style: {\n        background: \"rgba(0, 0, 0, 0.8)\"\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white shadow-2xl sm:m-8 rounded-lg w-full md:w-1/4 border-t-8 border-green-500 p-2\",\n        showModal: showModal,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-between items-center text-xl\",\n          children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n            className: \"text-xl font-bold\",\n            children: \"Create your Child's profile\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setShowModal(prev => !prev),\n            children: /*#__PURE__*/_jsxDEV(FiX, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 74\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: handleSubmit,\n            className: \"p-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"px-4 mb-2\",\n              children: [err && makeToast(\"error\", err), success && makeToast(\"success\", success)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 105,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-4\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex gap-4\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    htmlFor: \"firstName\",\n                    className: \"block text-black font-medium text-sm mb-2\",\n                    children: \"First Name\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 112,\n                    columnNumber: 37\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"text\",\n                    placeholder: \"Enter child's first name\",\n                    id: \"firstName\",\n                    value: firstName,\n                    name: \"firstName\",\n                    onChange: handleChangeInput,\n                    className: \"bg-gray-200 appearance-none border-2 border-gray-200 rounded w-full py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:bg-white focus:border-green-500\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 113,\n                    columnNumber: 37\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 111,\n                  columnNumber: 33\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    htmlFor: \"lastName\",\n                    className: \"block text-black font-medium text-sm mb-2\",\n                    children: \"Last Name\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 116,\n                    columnNumber: 37\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"text\",\n                    placeholder: \"Enter child's last name\",\n                    id: \"lastName\",\n                    value: lastName,\n                    name: \"lastName\",\n                    onChange: handleChangeInput,\n                    className: \"bg-gray-200 appearance-none border-2 border-gray-200 rounded w-full py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:bg-white focus:border-green-500\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 117,\n                    columnNumber: 37\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 115,\n                  columnNumber: 33\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 110,\n                columnNumber: 29\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 109,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"username\",\n                className: \"block text-black font-medium text-sm mb-2\",\n                children: \"Username\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 122,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                placeholder: \"Create child's username\",\n                id: \"username\",\n                value: username,\n                name: \"username\",\n                onChange: handleChangeInput,\n                className: \"bg-gray-200 appearance-none border-2 border-gray-200 rounded w-full py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:bg-white focus:border-green-500\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 123,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 121,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"grade\",\n                className: \"block text-black font-medium text-sm mb-2\",\n                children: \"Grade\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 126,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"relative\",\n                children: [/*#__PURE__*/_jsxDEV(\"select\", {\n                  id: \"grade\",\n                  value: grade,\n                  name: \"grade\",\n                  onChange: handleChangeInput,\n                  className: \"block appearance-none w-full bg-gray-200 border-2 border-gray-200 rounded w-full py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:bg-white focus:border-green-500\",\n                  children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"\",\n                    children: \"Select the Grade\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 129,\n                    columnNumber: 37\n                  }, this), grades.map(grade => /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: grade._id,\n                    children: grade.name\n                  }, grade._id, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 132,\n                    columnNumber: 45\n                  }, this))]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 128,\n                  columnNumber: 33\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700\",\n                  children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                    className: \"fill-current h-4 w-4\",\n                    xmlns: \"http://www.w3.org/2000/svg\",\n                    viewBox: \"0 0 20 20\",\n                    children: /*#__PURE__*/_jsxDEV(\"path\", {\n                      d: \"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 137,\n                      columnNumber: 130\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 137,\n                    columnNumber: 37\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 136,\n                  columnNumber: 33\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 127,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 125,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"birthday\",\n                className: \"block text-black font-medium text-sm mb-2\",\n                children: \"Date of Birth\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 142,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"date\",\n                placeholder: \"Date of Birth\",\n                id: \"birthday\",\n                value: birthday,\n                name: \"birthday\",\n                onChange: handleChangeInput,\n                className: \"bg-gray-200 appearance-none border-2 border-gray-200 rounded w-full py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:bg-white focus:border-green-500\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 143,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 141,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"password\",\n                className: \"block text-black font-medium text-sm mb-2\",\n                children: \"Password\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 146,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"password\",\n                placeholder: \"Password\",\n                id: \"password\",\n                value: password,\n                name: \"password\",\n                onChange: handleChangeInput,\n                className: \"bg-gray-200 appearance-none border-2 border-gray-200 rounded w-full py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:bg-white focus:border-green-500\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 147,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 145,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-6\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"cf_password\",\n                className: \"block text-black font-medium text-sm mb-2\",\n                children: \"Confirm Password\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 150,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                placeholder: \"Confirm Password\",\n                id: \"cf_password\",\n                value: cf_password,\n                name: \"cf_password\",\n                onChange: handleChangeInput,\n                className: \"bg-gray-200 appearance-none border-2 border-gray-200 rounded w-full py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:bg-white focus:border-green-500\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 151,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 149,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-end\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"submit\",\n                className: \"border-2 border-green-400 bg-green-400 py-2 px-8 rounded-full\",\n                children: \"Add Child\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 154,\n                columnNumber: 29\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 153,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 13\n    }, this) : null\n  }, void 0, false);\n};\n\n_s(AddChild, \"b3oNiDN3J03ADhMy54u+ZHFp6oU=\", false, function () {\n  return [useSelector, useDispatch, useSelector];\n});\n\n_c = AddChild;\n\nvar _c;\n\n$RefreshReg$(_c, \"AddChild\");","map":{"version":3,"sources":["C:/Users/Vishw/OneDrive/Documents/Mythinkacademy/client/src/pages/Dashboard/Parent/Overview/addChild.jsx"],"names":["React","useState","useRef","useEffect","useCallback","FiX","useDispatch","useSelector","isEmpty","isStrong","isLength","isMatch","makeToast","axios","fetchAllGrades","dispatchGetAllGrades","initialState","firstName","lastName","username","birthday","grade","password","cf_password","err","success","AddChild","showModal","setShowModal","allGrades","state","grades","dispatch","then","res","parentToken","student","setStudent","handleChangeInput","e","name","value","target","handleSubmit","preventDefault","post","headers","Authorization","data","msg","window","location","reload","response","modalRef","closeModal","current","keyPress","key","document","addEventListener","removeEventListener","background","prev","map","_id"],"mappings":"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","sourcesContent":["import React, { useState, useRef, useEffect, useCallback } from 'react'\r\nimport { FiX } from 'react-icons/fi'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { isEmpty, isStrong, isLength, isMatch } from '../../../../Utils/Validation/Validation'\r\nimport makeToast from '../../../../Utils/Notification/Toaster'\r\nimport axios from 'axios'\r\nimport { fetchAllGrades, dispatchGetAllGrades } from '../../../../redux/actions/GradesAction'\r\n\r\nconst initialState = {\r\n    firstName: '',\r\n    lastName: '',\r\n    username: '',\r\n    birthday: '',\r\n    grade: '',\r\n    password: '',\r\n    cf_password: '',\r\n    err: '',\r\n    success: ''\r\n}\r\n\r\n\r\nexport const AddChild = ({ showModal, setShowModal }) => {\r\n    const allGrades = useSelector(state => state.allGrades)\r\n\r\n    const {grades} = allGrades\r\n\r\n    const dispatch = useDispatch()\r\n    useEffect(() => {\r\n        fetchAllGrades().then(res => {\r\n            dispatch(dispatchGetAllGrades(res))\r\n        })\r\n    }, [dispatch])\r\n\r\n    const parentToken = useSelector(state => state.parentToken)\r\n\r\n    const [student, setStudent] = useState(initialState)\r\n\r\n    const { firstName, lastName, username, birthday, grade, password, cf_password, err, success } = student\r\n\r\n    const handleChangeInput = e => {\r\n        const { name, value } = e.target\r\n        setStudent({...student, [name]:value, err: '', success: ''})\r\n    }\r\n\r\n    const handleSubmit = async e => {\r\n        e.preventDefault()\r\n        if(isEmpty(firstName) || isEmpty(lastName) || isEmpty(username) || isEmpty(birthday) || isEmpty(grade) || isEmpty(password) || isEmpty(cf_password))\r\n                return setStudent({...student, err: 'Please fill in all fields.' , success: ''})\r\n\r\n        if(isLength(password))\r\n            return setStudent({...student, err: 'Password must be at least 6 characters.' , success: ''})\r\n        \r\n        if(!isStrong(password))\r\n            return setStudent({...student, err: 'Password must contain one or more alphanumeric characters.' , success: ''})\r\n\r\n        if(!isMatch(password, cf_password))\r\n            return setStudent({...student, err: 'Password did not match.' , success: ''})\r\n        \r\n        try {\r\n            const res = await axios.post('/parent/addchild', {\r\n                firstName, lastName, username, birthday, grade, password\r\n            }, {\r\n                headers: {Authorization: parentToken}\r\n            })\r\n\r\n            setStudent({...student, err: '', success: res.data.msg})\r\n            window.location.reload(false)\r\n        } catch (err) {\r\n            err.response.data.msg && \r\n            setStudent({...student, err: err.response.data.msg, success: ''})\r\n        }\r\n    }\r\n\r\n\r\n    const modalRef = useRef()\r\n    \r\n    const closeModal = e => {\r\n        if(modalRef.current === e.target) {\r\n            setShowModal(false);\r\n        }\r\n    }\r\n\r\n    const keyPress = useCallback(e => {\r\n        if(e.key === 'Escape' && showModal) {\r\n            setShowModal(false)\r\n        }\r\n    }, [setShowModal, showModal])\r\n\r\n    useEffect(() => {\r\n        document.addEventListener('keydown', keyPress);\r\n        return () => document.removeEventListener('keydown', keyPress)\r\n    }, [keyPress])\r\n\r\n    return (\r\n        <>\r\n        {showModal ? (\r\n            <div ref={modalRef} onClick={closeModal} className=\"w-full h-full fixed inset-0 z-10 flex items-center justify-center p-4 \" style={{background: \"rgba(0, 0, 0, 0.8)\"}}>\r\n                <div className=\"bg-white shadow-2xl sm:m-8 rounded-lg w-full md:w-1/4 border-t-8 border-green-500 p-2\" showModal={showModal}>\r\n                <div className=\"flex justify-between items-center text-xl\">\r\n                    <h6 className=\"text-xl font-bold\">Create your Child's profile</h6>\r\n                    <button onClick={() => setShowModal(prev => !prev)} ><FiX /></button>\r\n                </div>\r\n                <div>\r\n                    <form onSubmit={handleSubmit} className=\"p-4\">\r\n                        <div className=\"px-4 mb-2\">\r\n                            {err && makeToast(\"error\", err)}\r\n                            {success && makeToast(\"success\", success)}\r\n                        </div>\r\n                        <div className=\"mb-4\">\r\n                            <div className=\"flex gap-4\">\r\n                                <div>\r\n                                    <label htmlFor=\"firstName\" className=\"block text-black font-medium text-sm mb-2\">First Name</label>\r\n                                    <input type=\"text\" placeholder=\"Enter child's first name\" id=\"firstName\" value={firstName} name=\"firstName\" onChange={handleChangeInput} className=\"bg-gray-200 appearance-none border-2 border-gray-200 rounded w-full py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:bg-white focus:border-green-500\" />\r\n                                </div>\r\n                                <div>\r\n                                    <label htmlFor=\"lastName\" className=\"block text-black font-medium text-sm mb-2\">Last Name</label>\r\n                                    <input type=\"text\" placeholder=\"Enter child's last name\" id=\"lastName\" value={lastName} name=\"lastName\" onChange={handleChangeInput} className=\"bg-gray-200 appearance-none border-2 border-gray-200 rounded w-full py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:bg-white focus:border-green-500\" />\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"mb-4\">\r\n                            <label htmlFor=\"username\" className=\"block text-black font-medium text-sm mb-2\">Username</label>\r\n                            <input type=\"text\" placeholder=\"Create child's username\" id=\"username\" value={username} name=\"username\" onChange={handleChangeInput} className=\"bg-gray-200 appearance-none border-2 border-gray-200 rounded w-full py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:bg-white focus:border-green-500\" />\r\n                        </div>\r\n                        <div className=\"mb-4\">\r\n                            <label htmlFor=\"grade\" className=\"block text-black font-medium text-sm mb-2\">Grade</label>\r\n                            <div className=\"relative\">\r\n                                <select id=\"grade\" value={grade} name=\"grade\" onChange={handleChangeInput} className=\"block appearance-none w-full bg-gray-200 border-2 border-gray-200 rounded w-full py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:bg-white focus:border-green-500\">\r\n                                    <option value=\"\">Select the Grade</option>\r\n                                    {\r\n                                        grades.map(grade => (\r\n                                            <option value={grade._id} key={grade._id}>{grade.name}</option>\r\n                                        ))\r\n                                    }\r\n                                </select>\r\n                                <div className=\"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700\">\r\n                                    <svg className=\"fill-current h-4 w-4\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\"><path d=\"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z\"/></svg>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"mb-4\">\r\n                            <label htmlFor=\"birthday\" className=\"block text-black font-medium text-sm mb-2\">Date of Birth</label>\r\n                            <input type=\"date\" placeholder=\"Date of Birth\" id=\"birthday\" value={birthday} name=\"birthday\" onChange={handleChangeInput} className=\"bg-gray-200 appearance-none border-2 border-gray-200 rounded w-full py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:bg-white focus:border-green-500\" />\r\n                        </div>\r\n                        <div className=\"mb-4\">\r\n                            <label htmlFor=\"password\" className=\"block text-black font-medium text-sm mb-2\">Password</label>\r\n                            <input type=\"password\" placeholder=\"Password\" id=\"password\" value={password} name=\"password\" onChange={handleChangeInput}  className=\"bg-gray-200 appearance-none border-2 border-gray-200 rounded w-full py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:bg-white focus:border-green-500\" />\r\n                        </div>\r\n                        <div className=\"mb-6\">\r\n                            <label htmlFor=\"cf_password\" className=\"block text-black font-medium text-sm mb-2\">Confirm Password</label>\r\n                            <input type=\"text\" placeholder=\"Confirm Password\" id=\"cf_password\" value={cf_password} name=\"cf_password\" onChange={handleChangeInput} className=\"bg-gray-200 appearance-none border-2 border-gray-200 rounded w-full py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:bg-white focus:border-green-500\" />\r\n                        </div>\r\n                        <div className=\"flex justify-end\">\r\n                            <button type=\"submit\" className=\"border-2 border-green-400 bg-green-400 py-2 px-8 rounded-full\">Add Child</button>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n                </div>\r\n            </div>\r\n        ) : null}\r\n        </>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}