{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Vishw\\\\OneDrive\\\\Documents\\\\Mythinkacademy\\\\client\\\\src\\\\pages\\\\Dashboard\\\\Admin\\\\Settings\\\\Settings.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport axios from 'axios';\nimport { useSelector } from 'react-redux';\nimport { isLength, isStrong, isMatch } from '../../../../Utils/Validation/Validation';\nimport makeToast from '../../../../Utils/Notification/Toaster';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst initialState = {\n  firstName: '',\n  lastName: '',\n  password: '',\n  cf_password: '',\n  err: '',\n  success: ''\n};\n\nfunction Settings() {\n  _s();\n\n  const adminAuth = useSelector(state => state.adminAuth);\n  const adminToken = useSelector(state => state.adminToken);\n  const {\n    admin\n  } = adminAuth;\n  const [data, setData] = useState(initialState);\n  const {\n    firstName,\n    lastName,\n    password,\n    cf_password,\n    err,\n    success\n  } = data;\n  const [avatar, setAvatar] = useState(false);\n  const [loading, setLoading] = useState(false);\n\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setData({ ...data,\n      [name]: value,\n      err: '',\n      success: ''\n    });\n  };\n\n  const changeAvatar = async e => {\n    e.preventDefault();\n\n    try {\n      const file = e.target.files[0];\n      if (!file) return setData({ ...data,\n        err: 'No files were uploaded.',\n        success: ''\n      });\n      if (file.size > 1024 * 1024) return setData({ ...data,\n        err: 'Size too large.',\n        success: ''\n      });\n      if (file.type !== 'image/jpeg' && file.type !== 'image/png') return setData({ ...data,\n        err: 'File format is incorrect.',\n        success: ''\n      });\n      let formData = new FormData();\n      formData.append('file', file);\n      setLoading(true);\n      const res = await axios.post('/api/upload_avatar', formData, {\n        headers: {\n          'content-type': 'multipart/form-data',\n          Authorization: adminToken\n        }\n      });\n      setLoading(false);\n      setAvatar(res.data.url);\n    } catch (err) {\n      setData({ ...data,\n        err: err.response.data.msg,\n        success: ''\n      });\n    }\n  };\n\n  const updateInfor = () => {\n    try {\n      axios.patch('/admin/update', {\n        firstName: firstName ? firstName : admin.firstName,\n        lastName: lastName ? lastName : admin.lastName,\n        avatar: avatar ? avatar : admin.avatar\n      }, {\n        headers: {\n          Authorization: adminToken\n        }\n      });\n      setData({ ...data,\n        err: '',\n        success: \"Updated Success!\"\n      });\n      window.location.reload(false);\n    } catch (err) {\n      setData({ ...data,\n        err: err.response.data.msg,\n        success: ''\n      });\n    }\n  };\n\n  const updatePassword = () => {\n    if (isLength(password)) return setData({ ...data,\n      err: 'Password must be at least 6 characters.',\n      success: ''\n    });\n    if (!isStrong(password)) return setData({ ...data,\n      err: 'Password must contain one or more alphanumeric characters.',\n      success: ''\n    });\n    if (!isMatch(password, cf_password)) return setData({ ...data,\n      err: 'Password did not match.',\n      success: ''\n    });\n\n    try {\n      axios.post('/admin/reset', {\n        password\n      }, {\n        headers: {\n          Authorization: adminToken\n        }\n      });\n      setData({ ...data,\n        err: '',\n        success: \"Updated Success!\"\n      });\n      window.location.reload(false);\n    } catch (err) {\n      setData({ ...data,\n        err: err.response.data.msg,\n        success: ''\n      });\n    }\n  };\n\n  const handleUpdate = () => {\n    if (firstName || lastName || avatar) updateInfor();\n    if (password) updatePassword();\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"main\", {\n    className: \"overflow-auto pb-4 px-6\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"px-4 mb-2\",\n        children: [err && makeToast(\"error\", err), success && makeToast(\"success\", success), loading && /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Loading...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 37\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container mx-auto max-w-8xl\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-full bg-white rounded-lg mx-auto mt-8 flex flex-col md:flex-row border-t-2 border-l-2 border-r-2 shadow-xl overflow-hidden rounded-b-none\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"md:w-1/3 w-full bg-gray-100 p-8\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"font-medium text-md text-gray-700 mb-4 tracking-wide\",\n              children: \"Profile Info\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 117,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xs text-gray-500\",\n              children: \"Update your basic profile information such as Name, Email Address, Phone Number, Password and Image.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 118,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"pt-8 mx-auto text-center w-48\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mt-8 mb-4\",\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  className: \"w-auto mx-auto rounded-full object-cover object-center\",\n                  src: avatar ? avatar : admin.avatar,\n                  alt: \"Avatar Upload\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 121,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 120,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"bg-gray-200 text-gray-500 text-xs mt-5 ml-8 font-bold px-4 py-2 rounded-lg float-left hover:bg-gray-300 hover:text-gray-600 relative overflow-hidden cursor-pointer\",\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  onChange: changeAvatar,\n                  type: \"file\",\n                  name: \"file\",\n                  id: \"file_up\",\n                  className: \"absolute inset-0 w-full h-full opacity-0 cursor-pointer\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 124,\n                  columnNumber: 37\n                }, this), \" Change Photo\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 123,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 119,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"md:w-2/3 w-full\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"py-3 px-8 md:px-16\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"firstName\",\n                className: \"text-sm text-gray-600\",\n                children: \"First Name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 130,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"mt-2 border-2 border-gray-200 px-3 py-2 block w-full rounded-lg text-base text-gray-900 focus:outline-none focus:border-indigo-500\",\n                type: \"text\",\n                name: \"firstName\",\n                id: \"firstName\",\n                placeholder: \"Your First Name\",\n                defaultValue: admin.firstName,\n                onChange: handleChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 131,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 129,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n              className: \"border-gray-200\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 134,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"py-3 px-8 md:px-16\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"lastName\",\n                className: \"text-sm text-gray-600\",\n                children: \"Last Name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 136,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"mt-2 border-2 border-gray-200 px-3 py-2 block w-full rounded-lg text-base text-gray-900 focus:outline-none focus:border-indigo-500\",\n                type: \"text\",\n                name: \"lastName\",\n                id: \"lastName\",\n                placeholder: \"Your last Name\",\n                defaultValue: admin.lastName,\n                onChange: handleChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 137,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 135,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n              className: \"border-gray-200\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 140,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"py-3 px-8 md:px-16\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"email\",\n                className: \"text-sm text-gray-600\",\n                children: \"Email Address\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 142,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"mt-2 border-2 border-gray-200 px-3 py-2 block w-full rounded-lg text-base text-gray-900 focus:outline-none focus:border-indigo-500\",\n                type: \"email\",\n                name: \"email\",\n                id: \"email\",\n                placeholder: \"Your email address\",\n                disabled: true,\n                defaultValue: admin.email\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 143,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 141,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n              className: \"border-gray-200\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 146,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"py-3 px-8 md:px-16\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"password\",\n                className: \"text-sm text-gray-600\",\n                children: \"Password\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 148,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"mt-2 border-2 border-gray-200 px-3 py-2 block w-full rounded-lg text-base text-gray-900 focus:outline-none focus:border-indigo-500\",\n                type: \"password\",\n                name: \"password\",\n                id: \"password\",\n                placeholder: \"Your Password\",\n                value: password,\n                onChange: handleChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 149,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 147,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n              className: \"border-gray-200\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 152,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"py-3 px-8 md:px-16\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"cf_password\",\n                className: \"text-sm text-gray-600\",\n                children: \"Confirm New Password\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 154,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"mt-2 border-2 border-gray-200 px-3 py-2 block w-full rounded-lg text-base text-gray-900 focus:outline-none focus:border-indigo-500\",\n                type: \"text\",\n                name: \"cf_password\",\n                id: \"cf_password\",\n                placeholder: \"Confirm Password\",\n                value: cf_password,\n                onChange: handleChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 155,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 153,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-16 py-6 bg-gray-300 flow-root rounded-b-lg border-t border-gray-200\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"float-left text-xs text-gray-500 tracking-tight mt-2 pb-4 md:pb:0\",\n            children: \"Click on Save to update your Profile Info\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            disabled: loading,\n            onClick: handleUpdate,\n            className: \"bg-indigo-500 text-white text-sm font-medium px-6 py-2 rounded float-right uppercase cursor-pointer\",\n            children: \"Update\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 107,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Settings, \"g6hDQpZXePNgSEh7iI1aXLlanmQ=\", false, function () {\n  return [useSelector, useSelector];\n});\n\n_c = Settings;\nexport default Settings;\n\nvar _c;\n\n$RefreshReg$(_c, \"Settings\");","map":{"version":3,"sources":["C:/Users/Vishw/OneDrive/Documents/Mythinkacademy/client/src/pages/Dashboard/Admin/Settings/Settings.jsx"],"names":["React","useState","axios","useSelector","isLength","isStrong","isMatch","makeToast","initialState","firstName","lastName","password","cf_password","err","success","Settings","adminAuth","state","adminToken","admin","data","setData","avatar","setAvatar","loading","setLoading","handleChange","e","name","value","target","changeAvatar","preventDefault","file","files","size","type","formData","FormData","append","res","post","headers","Authorization","url","response","msg","updateInfor","patch","window","location","reload","updatePassword","handleUpdate","email"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\r\nimport axios from 'axios'\r\nimport { useSelector } from 'react-redux'\r\nimport { isLength, isStrong, isMatch } from '../../../../Utils/Validation/Validation'\r\nimport makeToast from '../../../../Utils/Notification/Toaster'\r\n\r\nconst initialState = {\r\n    firstName: '',\r\n    lastName: '',\r\n    password: '',\r\n    cf_password: '',\r\n    err: '',\r\n    success: ''\r\n}\r\n\r\n\r\nfunction Settings() {\r\n    const adminAuth = useSelector(state => state.adminAuth)\r\n    const adminToken = useSelector(state => state.adminToken)\r\n\r\n\r\n    const {admin} = adminAuth\r\n    const [data, setData] = useState(initialState)\r\n    const { firstName, lastName, password, cf_password, err, success } = data\r\n\r\n    const [avatar, setAvatar] = useState(false)\r\n    const [loading, setLoading] = useState(false)\r\n    \r\n    const handleChange = e => {\r\n        const { name, value } = e.target \r\n        setData({ ...data, [name]:value, err: '', success: ''})\r\n    }\r\n\r\n    const changeAvatar = async(e) => {\r\n        e.preventDefault()\r\n        try {\r\n            const file = e.target.files[0]\r\n\r\n            if(!file) return setData({ ...data, err: 'No files were uploaded.', success: ''})\r\n\r\n            if(file.size > 1024 * 1024) \r\n                return setData({ ...data, err: 'Size too large.', success: ''})\r\n\r\n            if(file.type !== 'image/jpeg' && file.type !== 'image/png')\r\n                return setData({ ...data, err: 'File format is incorrect.', success: ''})\r\n\r\n            let formData = new FormData()\r\n\r\n            formData.append('file', file)\r\n\r\n            setLoading(true)\r\n            const res = await axios.post('/api/upload_avatar', formData, {\r\n                headers: {'content-type': 'multipart/form-data', Authorization: adminToken}\r\n            })\r\n\r\n            setLoading(false)\r\n            setAvatar(res.data.url)\r\n            \r\n        } catch (err) {\r\n            setData({ ...data, err: err.response.data.msg, success:''})\r\n        }\r\n    }\r\n\r\n    const updateInfor = () => {\r\n        try {\r\n            axios.patch('/admin/update', {\r\n                firstName: firstName ? firstName : admin.firstName,\r\n                lastName: lastName ? lastName : admin.lastName,\r\n                avatar: avatar ? avatar : admin.avatar\r\n            }, {\r\n                headers: {Authorization: adminToken}\r\n            })\r\n            setData({ ...data, err: '', success: \"Updated Success!\"})\r\n            window.location.reload(false)\r\n        } catch (err) {\r\n            setData({ ...data, err: err.response.data.msg, success: ''})\r\n        }\r\n    }\r\n\r\n    const updatePassword = () => {\r\n        if(isLength(password))\r\n            return setData({...data, err: 'Password must be at least 6 characters.' , success: ''})\r\n        \r\n        if(!isStrong(password))\r\n            return setData({...data, err: 'Password must contain one or more alphanumeric characters.' , success: ''})\r\n\r\n        if(!isMatch(password, cf_password))\r\n            return setData({...data, err: 'Password did not match.' , success: ''})\r\n\r\n        try {\r\n            axios.post('/admin/reset', {password}, {\r\n                headers: {Authorization: adminToken}\r\n            })\r\n            setData({ ...data, err:'', success: \"Updated Success!\"})\r\n            window.location.reload(false)\r\n        } catch (err) {\r\n            setData({ ...data, err: err.response.data.msg, success:''})\r\n        }\r\n    }\r\n\r\n    const handleUpdate = () => {\r\n        if(firstName || lastName || avatar) updateInfor()\r\n        if(password) updatePassword()\r\n    }\r\n\r\n    return (\r\n        <main className=\"overflow-auto pb-4 px-6\">\r\n            <div>\r\n                <div className=\"px-4 mb-2\">\r\n                        {err && makeToast(\"error\", err)}\r\n                        {success && makeToast(\"success\", success)}\r\n                        {loading && <h3>Loading...</h3>}\r\n                </div>\r\n                <div className=\"container mx-auto max-w-8xl\">\r\n                    <div className=\"w-full bg-white rounded-lg mx-auto mt-8 flex flex-col md:flex-row border-t-2 border-l-2 border-r-2 shadow-xl overflow-hidden rounded-b-none\">\r\n                        <div className=\"md:w-1/3 w-full bg-gray-100 p-8\">\r\n                            <h2 className=\"font-medium text-md text-gray-700 mb-4 tracking-wide\">Profile Info</h2>\r\n                            <p className=\"text-xs text-gray-500\">Update your basic profile information such as Name, Email Address, Phone Number, Password and Image.</p>\r\n                            <div className=\"pt-8 mx-auto text-center w-48\">\r\n                                <div className=\"mt-8 mb-4\">\r\n                                    <img className=\"w-auto mx-auto rounded-full object-cover object-center\" src={avatar ? avatar : admin.avatar} alt=\"Avatar Upload\" />\r\n                                </div>\r\n                                <div className=\"bg-gray-200 text-gray-500 text-xs mt-5 ml-8 font-bold px-4 py-2 rounded-lg float-left hover:bg-gray-300 hover:text-gray-600 relative overflow-hidden cursor-pointer\">\r\n                                    <input onChange={changeAvatar} type=\"file\" name=\"file\" id=\"file_up\" className=\"absolute inset-0 w-full h-full opacity-0 cursor-pointer\" /> Change Photo\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    <div className=\"md:w-2/3 w-full\">\r\n                        <div className=\"py-3 px-8 md:px-16\">\r\n                            <label htmlFor=\"firstName\" className=\"text-sm text-gray-600\">First Name</label>\r\n                            <input className=\"mt-2 border-2 border-gray-200 px-3 py-2 block w-full rounded-lg text-base text-gray-900 focus:outline-none focus:border-indigo-500\" \r\n                                    type=\"text\" name=\"firstName\" id=\"firstName\" placeholder=\"Your First Name\" defaultValue={admin.firstName} onChange={handleChange} />\r\n                        </div>\r\n                        <hr className=\"border-gray-200\" />\r\n                        <div className=\"py-3 px-8 md:px-16\">\r\n                            <label htmlFor=\"lastName\" className=\"text-sm text-gray-600\">Last Name</label>\r\n                            <input className=\"mt-2 border-2 border-gray-200 px-3 py-2 block w-full rounded-lg text-base text-gray-900 focus:outline-none focus:border-indigo-500\" \r\n                                    type=\"text\" name=\"lastName\" id=\"lastName\" placeholder=\"Your last Name\" defaultValue={admin.lastName} onChange={handleChange} />\r\n                        </div>\r\n                        <hr className=\"border-gray-200\" />\r\n                        <div className=\"py-3 px-8 md:px-16\">\r\n                            <label htmlFor=\"email\" className=\"text-sm text-gray-600\">Email Address</label>\r\n                            <input className=\"mt-2 border-2 border-gray-200 px-3 py-2 block w-full rounded-lg text-base text-gray-900 focus:outline-none focus:border-indigo-500\"\r\n                                    type=\"email\" name=\"email\" id=\"email\" placeholder=\"Your email address\" disabled defaultValue={admin.email} />\r\n                        </div>\r\n                        <hr className=\"border-gray-200\" />\r\n                        <div className=\"py-3 px-8 md:px-16\">\r\n                            <label htmlFor=\"password\" className=\"text-sm text-gray-600\">Password</label>\r\n                            <input className=\"mt-2 border-2 border-gray-200 px-3 py-2 block w-full rounded-lg text-base text-gray-900 focus:outline-none focus:border-indigo-500\" \r\n                                    type=\"password\" name=\"password\" id=\"password\" placeholder=\"Your Password\" value={password} onChange={handleChange} />\r\n                        </div>\r\n                        <hr className=\"border-gray-200\" />\r\n                        <div className=\"py-3 px-8 md:px-16\">\r\n                            <label htmlFor=\"cf_password\" className=\"text-sm text-gray-600\">Confirm New Password</label>\r\n                            <input className=\"mt-2 border-2 border-gray-200 px-3 py-2 block w-full rounded-lg text-base text-gray-900 focus:outline-none focus:border-indigo-500\" \r\n                                    type=\"text\" name=\"cf_password\" id=\"cf_password\" placeholder=\"Confirm Password\" value={cf_password} onChange={handleChange} />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"p-16 py-6 bg-gray-300 flow-root rounded-b-lg border-t border-gray-200\">\r\n                    <p className=\"float-left text-xs text-gray-500 tracking-tight mt-2 pb-4 md:pb:0\">Click on Save to update your Profile Info</p>\r\n                    <button disabled={loading} onClick={handleUpdate} className=\"bg-indigo-500 text-white text-sm font-medium px-6 py-2 rounded float-right uppercase cursor-pointer\">Update</button>\r\n                </div>\r\n                </div>\r\n            </div>\r\n        </main>\r\n    )\r\n}\r\n\r\nexport default Settings\r\n"]},"metadata":{},"sourceType":"module"}